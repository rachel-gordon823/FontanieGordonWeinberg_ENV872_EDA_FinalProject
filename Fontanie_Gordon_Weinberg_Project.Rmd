---
output: 
  pdf_document:
    keep_tex: yes
    fig_caption: yes
    number_sections: yes
geometry: margin=2.54cm
title: "Air Quality in Ukraine post Ukraine-Russia Dispute"
subtitle: "Web address for GitHub repository"
author: "Curly Girlies: Shirley Fontani√©, Rachel Gordon, and Julia Weinberg"
fontsize: 12pt
mainfont: Times New Roman

---

\newpage
\tableofcontents 
\newpage
\listoftables 
\newpage
\listoffigures 
\newpage

```{r setup, include=FALSE}
# Set your working directory 

getwd() 

# Load your packages  

library(tidyverse)
library(lubridate)
library(ggplot2)
library(zoo)

# Set your ggplot theme

ourtheme <- theme_classic(base_size = 14)+ 
  theme(axis.text = element_text(color="black"), 
        legend.position = "top")
theme_set(ourtheme)
  
# Load your datasets

UkraineData <- read.csv("./Data/RawData/Ukraine_AQIData.csv", stringsAsFactors = TRUE)

```

# Rationale and Research Questions

> Research question: How does air quality in various Ukrainian cities differ before and after the Ukraine-Russia dispute?  
*******
> Rationale: On February 24, 2022, Russia attacked Ukraine. The first city attacked was
Lviv and Dnipro. 
> Kyiv was hit February 24th.  

\newpage

# Dataset Information 

> Describe sources of data here (input Julia paragraph)

```{r Data wrangling}  
# Initial wrangling 

Ukraine_Processed <- UkraineData %>% 
  drop_na(pm10) %>% 
  drop_na(pm25) 

# Setting Date 

Ukraine_Processed$date <- as.Date(Ukraine_Processed$date, "%m/%d/%y")

# Creating subsets by city  

Dnipro_2021 <- Ukraine_Processed %>% 
  filter(City %in% "Dnipro")%>%
  subset(date > "2021-2-28" & date < "2021-04-01") 
Dnipro_2021$date = as.yearmon(Dnipro_2021$date)

Dnipro_2022 <- Ukraine_Processed %>%
  filter(City %in% "Dnipro")%>%
  subset(date > "2022-2-28" & date < "2022-04-01") 
Dnipro_2022$date = as.yearmon(Dnipro_2022$date)

Lviv_2021 <- Ukraine_Processed %>% 
  filter(City %in% "Lviv") %>%
  subset(date > "2021-2-28" & date < "2021-04-01")

Lviv_2022 <- Ukraine_Processed %>% 
  filter(City %in% "Lviv") %>%
  subset(date > "2022-2-28" & date < "2022-04-01") 

#FULL_DNIPRO <- bind_rows(Dnipro_2021,Dnipro_2022)

#FULL_LVIV <- bind_rows(Lviv_2021,Lviv_2022)

```

> Explain data wrangling process here (shirley do this) 

Data Used | Brief Description 
----------|------------------
UkraineData | (Raw) Ukraine air quality data 
Ukraine_Processed | (Processed) Ukraine air quality data, with no missing values 
Dnipro | (Processed) Dnipro air quality data, showing PM2.5 and PM10 values 
Lviv | (Processed) Lviv air quality data, showing PM2.5 and PM10 values 

\newpage

# Exploratory Analysis  

```{r Plotting PM2.5, fig.cap = "Comparing PM2.5 in Dnipro and Lviv, Ukraine} 
# DNIPRO PM2.5
PM25_Dnipro_PLOT <- ggplot(rbind(Dnipro_2021,Dnipro_2022), aes(month(date, label = TRUE, abbr = TRUE)), value, group=as.Date(year(Dnipro_2021$date)), color =as.Date(year(Dnipro_2021$date)))+ 
  #(x = date, y = pm25, color = date))+ 
  geom_line()+  
  geom_point()+
  scale_x_date(limits = as.Date(c("2022-03-01", "2022-03-31")))+ 
  xlab("Date")+ 
  ylab("PM2.5")+ 
  labs(title = "        Observing PM2.5 Values in Dnipro, Ukraine")+
  ylim(0,75)+ 
  annotate(geom = "text", x = as.Date("2022-03-11"), y = 50, label ="March 11, 2022:")+ 
  annotate(geom = "text", x = as.Date("2022-03-11"), y = 45, label ="Missile Attack") 

print(PM25_Dnipro_PLOT) 


# LVIV PM2.5
PM25_Lviv_PLOT <- ggplot(Lviv_2021, aes(x = date, y = pm25)) + 
              geom_line()+  
  geom_point()+
  scale_x_date(limits = as.Date(c("2022-03-01", "2022-03-31")))+ 
  xlab("Date")+ 
  ylab("PM2.5")+ 
  labs(title = "        Observing PM2.5 Values in Lviv, Ukraine")+
  ylim(0,180)+
  annotate(geom = "text", x = as.Date("2022-03-18"), y = 165, label ="March 18, 2022:")+ 
  annotate(geom = "text", x = as.Date("2022-03-18"), y = 155, label ="1st Missile Attack")+ 
  annotate(geom = "text", x = as.Date("2022-03-26"), y = 110, label ="March 26, 2022:")+ 
  annotate(geom = "text", x = as.Date("2022-03-26"), y = 100, label ="2nd Missile Attack")
print(PM25_Lviv_PLOT)
```

```{r Plotting PM10, fig.cap= "Comparing PM10 in Dnipro and Lviv, Ukraine} 

#DNIPRO PM2.5
PM10_Dnipro_PLOT <- ggplot(Dnipro, aes(x = date, y = pm10)) + 
              geom_line()+  
  geom_point()+
  scale_x_date(limits = as.Date(c("2022-03-01", "2022-03-31")))+ 
  xlab("Date")+ 
  ylab("PM10")+ 
  labs(title = "        Observing PM10 Values in Dnipro, Ukraine")+
  ylim(0,40)+
  annotate(geom = "text", x = as.Date("2022-03-11"), y = 25, label ="March 11, 2022:")+ 
  annotate(geom = "text", x = as.Date("2022-03-11"), y = 23, label ="Missile Attack")
print(PM10_Dnipro_PLOT)   


#LVIV PM10
PM10_Lviv_PLOT <- ggplot(Lviv, aes(x = date, y = pm10)) + 
              geom_line()+  
  geom_point()+
  scale_x_date(limits = as.Date(c("2022-03-01", "2022-03-31")))+ 
  xlab("Date")+ 
  ylab("PM10")+ 
  labs(title = "        Observing PM10 Values in Lviv, Ukraine")+
  ylim(0,75)+
  annotate(geom = "text", x = as.Date("2022-03-18"), y = 70, label ="March 18, 2022:")+ 
  annotate(geom = "text", x = as.Date("2022-03-18"), y = 66, label ="1st Missile Attack")+ 
  annotate(geom = "text", x = as.Date("2022-03-26"), y = 60, label ="March 26, 2022:")+ 
  annotate(geom = "text", x = as.Date("2022-03-26"), y = 56, label ="2nd Missile Attack")
print(PM10_Lviv_PLOT)

```



\newpage

# Analysis



## Question 1: <insert specific question here and add additional subsections for additional questions below, if needed>

## Question 2: 




\newpage

# Summary and Conclusions


\newpage

# References
<add references here if relevant, otherwise delete this section> 
